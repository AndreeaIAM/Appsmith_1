{
  "gitSyncId": "667aa17abcfb414bef9929c8_668b8a373cc3f71912ad44c7",
  "id": "sumarfeed_Select_info",
  "pluginId": "mssql-plugin",
  "pluginType": "DB",
  "unpublishedAction": {
    "actionConfiguration": {
      "body": "SELECT DISTINCT\n\n_newsPost.IDNewsFeedPost\n, _newsPost.Title\n, _newsPost.FullContent\n, _attachmentDoc.IdAttachment\n, _attachmentDoc.[FileName]\n, _attachmentFoto.IdAttachment\n, _attachmentFoto.[FileName]\n, _newsPostType.IDPostType\n, _newsPostType.PostTypeName\n, _newsPostType.Confirmation\n--, _newsToLocations.LocationID\n--, _newsToLocations.LocationTypeID\n--, case when ISNULL(_newsToLocations.LocationID, 0) = 0 and ISNULL(_newsToLocations.LocationTypeID, 0) = 0 then 'all'\n--else 'restrict'\n--end as 'IsForAll'\nFROM \n main_NewsFeedPost _newsPost\nINNER JOIN nom_NewsFeedPostType _newsPostType ON _newsPost.NewsFeedTypeID = _newsPostType.IDPostType\nleft join \n( \nSELECT \n    _newPost.IDNewsFeedPost,\n    MAX(CASE WHEN _document.AttachmentTypeID = 20 THEN _document.IdAttachment END) AS DocumentAttachment,\n    MAX(CASE WHEN _foto.AttachmentTypeID = 21 THEN _foto.IdAttachment END) AS FotoAttachment\nFROM \n    main_NewsFeedPost _newPost\nLEFT JOIN \n    main_AttachmentToNewsPost _newsAttachment ON _newPost.IDNewsFeedPost = _newsAttachment.NewsFeedPostID\nLEFT JOIN \n    main_Attachment _document ON _document.IdAttachment = _newsAttachment.AttachmentID AND _document.AttachmentTypeID = 20\nLEFT JOIN \n    main_Attachment _foto ON _foto.IdAttachment = _newsAttachment.AttachmentID AND _foto.AttachmentTypeID = 21\nGROUP BY \n    _newPost.IDNewsFeedPost\n) _attachments on _newsPost.IDNewsFeedPost = _attachments.IDNewsFeedPost\n\nLEFT JOIN main_Attachment _attachmentDoc on _attachments.DocumentAttachment = _attachmentDoc.IdAttachment\nLEFT JOIN main_Attachment _attachmentFoto on _attachments.FotoAttachment = _attachmentFoto.IdAttachment\ninner join nom_NewsFeedPostType _postType on _newsPost.NewsFeedTypeID = _postType.IDPostType\n--inner join main_NewsToLocations _newsToLocations on _newsPost.IDNewsFeedPost = _newsToLocations.NewsFeedPostID\nWHERE\n_newsPost.Hidden = 0\nand _newsPost.IDNewsFeedPost in(select distinct\nCase when ISNULL(_newsLocation.LocationID, 0) = 0 and ISNULL(_newsLocation.LocationTypeID, 0) = 0 then _newsLocation.NewsFeedPostID \nwhen ISNULL(_newsLocation.LocationID, 0) != 0 and ISNULL( _location.IDLocation,0) != 0 then _newsLocation.NewsFeedPostID\nwhen ISNULL(_newsLocation.LocationTypeID, 0) != 0 and ISNULL( _locationType.IDLocation,0) != 0 then _newsLocation.NewsFeedPostID\nend as posts\n\nfrom main_NewsToLocations _newsLocation \nleft join main_Location _location on (_newsLocation.LocationID = _location.IDLocation and _location.IDLocation = {{appsmith.URL.queryParams.l}})\nleft join main_Location _locationType on (_newsLocation.LocationTypeID= _locationType.LocationTypeID and _locationType.IDLocation = {{appsmith.URL.queryParams.l}})\n)",
      "encodeParamsToggle": true,
      "paginationType": "NONE",
      "pluginSpecifiedTemplates": [
        {
          "value": true
        }
      ],
      "timeoutInMillisecond": 10000
    },
    "confirmBeforeExecute": false,
    "datasource": {
      "id": "iqlite_beta5",
      "isAutoGenerated": false,
      "name": "iqlite_beta5",
      "pluginId": "mssql-plugin"
    },
    "dynamicBindingPathList": [
      {
        "key": "body"
      }
    ],
    "executeOnLoad": true,
    "name": "Select_info",
    "pageId": "sumarfeed",
    "userSetOnLoad": false
  }
}